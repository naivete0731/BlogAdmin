"use strict";(self["webpackChunkblog_admin"]=self["webpackChunkblog_admin"]||[]).push([[284],{9284:function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("博客配置")])]),t("el-form",{ref:"ConfigFormRef",attrs:{model:e.ConfigForm,rules:e.ConfigFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"Logo"}},[t("img",{ref:"imgSrc",staticClass:"the_img",attrs:{src:e.baseURL+e.ConfigForm.logo.replace(/^public/,""),alt:"图片"},on:{click:e.chooseImg}}),t("input",{ref:"iptFile",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFileChange}})]),t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.ConfigForm.title,callback:function(t){e.$set(e.ConfigForm,"title",t)},expression:"ConfigForm.title"}})],1),t("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[t("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:e.ConfigForm.keyword,callback:function(t){e.$set(e.ConfigForm,"keyword",t)},expression:"ConfigForm.keyword"}})],1),t("el-form-item",{attrs:{label:"博客描述",prop:"describe"}},[t("el-input",{attrs:{placeholder:"请输入博客描述"},model:{value:e.ConfigForm.describe,callback:function(t){e.$set(e.ConfigForm,"describe",t)},expression:"ConfigForm.describe"}})],1),t("el-form-item",{attrs:{label:"评论功能"}},[t("el-switch",{attrs:{"active-text":"开启","inactive-text":"禁用","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ConfigForm.comment,callback:function(t){e.$set(e.ConfigForm,"comment",t)},expression:"ConfigForm.comment"}})],1),t("el-form-item",{attrs:{label:"人工审核"}},[t("el-switch",{attrs:{"active-text":"开启","inactive-text":"禁用","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ConfigForm.review,callback:function(t){e.$set(e.ConfigForm,"review",t)},expression:"ConfigForm.review"}})],1),t("el-form-item",{attrs:{label:"注册"}},[t("el-switch",{attrs:{"active-text":"开启","inactive-text":"禁用","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ConfigForm.register,callback:function(t){e.$set(e.ConfigForm,"register",t)},expression:"ConfigForm.register"}})],1),t("el-form-item",[t("el-button",{on:{click:function(t){return e.upload()}}},[e._v("保存")])],1)],1)],1)],1)},o=[],l=i(7877),a=i(6361),s={name:"ConfigBlog",data(){return{baseURL:a.v,Config:{},ConfigForm:{logo:"",title:"",keyword:"",describe:"",comment:null,review:null,register:null},ConfigFormRules:{title:[{require:!0,message:"请输入标题",trigger:"blur"},{min:1,max:30,message:"文章标题的长度为1-30个字符",trigger:"blur"}],keyword:[{require:!0,message:"请输入关键字",trigger:"blur"},{min:2,max:100,message:"关键字超出限制",trigger:"blur"}],describe:[{require:!0,message:"请输入博客描述",trigger:"blur"},{min:2,max:100,message:"博客描述超出限制",trigger:"blur"}]},uploadFile:{}}},created(){this.getConfig()},methods:{async getConfig(){const{data:e}=await(0,l.iE)();if(200!==e.status)return this.$notify.error(e.message);this.ConfigForm=e.data[0]},onFileChange(e){const t=e.target.files;0!==t.length&&(this.$refs.imgSrc.setAttribute("src",URL.createObjectURL(t[0])),this.uploadFile=t[0])},chooseImg(){this.$refs.iptFile.click()},async upload(e){if(this.uploadFile.type){const e=new FormData;e.append("file",this.uploadFile);const{data:t}=await(0,l.ws)(e);if(201!==t.status)return this.$notify.error(t.message);this.ConfigForm.logo=t.data.path}else;const{data:t}=await(0,l.rF)(this.ConfigForm);if(201!==t.status)return this.$notify.error(t.message);this.$notify.success(t.message),this.getConfig()}}},n=s,c=i(1001),m=(0,c.Z)(n,r,o,!1,null,"5a1b4a9f",null),g=m.exports}}]);
//# sourceMappingURL=284.cdd08b69.js.map