{"version":3,"file":"js/477.e0c2fe18.js","mappings":"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","sources":["webpack://blog_admin/./src/views/roleprofile/UserList.vue","webpack://blog_admin/src/views/roleprofile/UserList.vue","webpack://blog_admin/./src/views/roleprofile/UserList.vue?dd13","webpack://blog_admin/./src/views/roleprofile/UserList.vue?c1ba"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-card',[_c('div',{staticClass:\"clearfix header-box\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"管理员列表\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.showAddDialog}},[_vm._v(\"添加管理员\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"stripe\":\"\",\"data\":_vm.adminList}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\"}}),_c('el-table-column',{attrs:{\"prop\":\"avatar\",\"label\":\"头像\",\"width\":\"65%\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.avatar)?_c('el-avatar',{attrs:{\"shape\":\"square\",\"src\":_vm.baseURL  +  scope.row.avatar.replace(/^public/, '')}}):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"账号\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"role\",\"label\":\"角色\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ row }){return [_vm._v(\" \"+_vm._s(row.role === 'superadmin' ? '超级管理员' : '管理员')+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ row }){return [_vm._v(\" \"+_vm._s(row.status === 1 ? '激活' : '未激活')+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"注册时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm.$formatDate(scope.row.createTime))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ row }){return [_c('el-tooltip',{attrs:{\"enterable\":false,\"effect\":\"dark\",\"content\":\"修改\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(row._id)}}})],1),_c('el-tooltip',{attrs:{\"enterable\":false,\"effect\":\"dark\",\"content\":\"删除\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeUserById(row._id)}}})],1)]}}])})],1)],1),_c('el-dialog',{attrs:{\"title\":_vm.isEdit ? '修改管理员' : '添加管理员',\"visible\":_vm.EditDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.EditDialogVisible=$event},\"close\":_vm.resetFileds}},[_c('el-form',{ref:\"EditFormRef\",attrs:{\"model\":_vm.EditForm,\"rules\":_vm.EditFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"头像\"}},[(!_vm.EditForm.avatar)?_c('img',{ref:\"imgSrc\",staticClass:\"the_img\",attrs:{\"src\":require(\"../../assets/images/avatar.jpg\"),\"alt\":\"\"}}):_c('img',{ref:\"imgSrc\",staticClass:\"the_img\",attrs:{\"src\":_vm.baseURL + _vm.EditForm.avatar.replace(/^public/, ''),\"alt\":\"图片\"}}),_c('input',{ref:\"iptFile\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.onFileChange}}),_c('el-button',{staticStyle:{\"vertical-align\":\"text-bottom\",\"margin-left\":\"50%\"},attrs:{\"type\":\"warning\",\"round\":\"\"},on:{\"click\":_vm.chooseImg}},[_vm._v(\"更换头像\")])],1),_c('el-form-item',{attrs:{\"label\":\"账号\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入账号\"},model:{value:(_vm.EditForm.username),callback:function ($$v) {_vm.$set(_vm.EditForm, \"username\", $$v)},expression:\"EditForm.username\"}})],1),(!_vm.isEdit)?_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入密码\",\"show-password\":\"\"},model:{value:(_vm.EditForm.password),callback:function ($$v) {_vm.$set(_vm.EditForm, \"password\", $$v)},expression:\"EditForm.password\"}})],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入邮箱\"},model:{value:(_vm.EditForm.email),callback:function ($$v) {_vm.$set(_vm.EditForm, \"email\", $$v)},expression:\"EditForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色\",\"prop\":\"role\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择角色\"},model:{value:(_vm.EditForm.role),callback:function ($$v) {_vm.$set(_vm.EditForm, \"role\", $$v)},expression:\"EditForm.role\"}},_vm._l((_vm.RoleList),function(obj){return _c('el-option',{key:obj.role,attrs:{\"label\":obj.name,\"value\":obj.role}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"状态\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择状态\"},model:{value:(_vm.EditForm.status),callback:function ($$v) {_vm.$set(_vm.EditForm, \"status\", $$v)},expression:\"EditForm.status\"}},_vm._l((_vm.RoleState),function(obj){return _c('el-option',{key:obj.state,attrs:{\"label\":obj.name,\"value\":obj.state}})}),1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.EditDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.upload()}}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-card>\r\n      <div slot=\"header\" class=\"clearfix header-box\">\r\n        <span>管理员列表</span>\r\n        <el-button type=\"primary\" size=\"mini\" @click=\"showAddDialog\">添加管理员</el-button>\r\n      </div>\r\n      <el-table style=\"width: 100%\" border stripe :data=\"adminList\">\r\n        <el-table-column type=\"index\" label=\"序号\"></el-table-column>\r\n        <el-table-column prop=\"avatar\" label=\"头像\" width=\"65%\">\r\n          <template v-slot=\"scope\">\r\n            <el-avatar v-if=\"scope.row.avatar\" shape=\"square\"   :src=\" baseURL  +  scope.row.avatar.replace(/^public/, '')\"></el-avatar>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"username\" label=\"账号\"></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\r\n        <el-table-column prop=\"role\" label=\"角色\">\r\n          <template v-slot=\"{ row }\">\r\n            {{ row.role === 'superadmin' ? '超级管理员' : '管理员' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"status\" label=\"状态\">\r\n          <template v-slot=\"{ row }\">\r\n            {{ row.status === 1 ? '激活' : '未激活' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"createTime\" label=\"注册时间\">\r\n          <template v-slot=\"scope\">\r\n            {{ $formatDate(scope.row.createTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template v-slot=\"{ row }\">\r\n        <!-- 修改按钮 -->\r\n            <el-tooltip :enterable=\"false\" effect=\"dark\" content=\"修改\" placement=\"top\">\r\n          <el-button @click=\"showEditDialog(row._id)\" type=\"primary\" icon=\"el-icon-edit\" size=\"mini\"></el-button>\r\n        </el-tooltip>\r\n        <!-- 删除按钮 -->\r\n        <el-tooltip :enterable=\"false\" effect=\"dark\" content=\"删除\" placement=\"top\">\r\n         <el-button @click=\"removeUserById(row._id)\" type=\"danger\" icon=\"el-icon-delete\" size=\"mini\"></el-button>\r\n        </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n\r\n    <!-- 添加管理员对话框\r\n    <el-dialog\r\n     title=\"添加管理员\"\r\n     :visible.sync=\"AddDialogVisible\"\r\n     width=\"30%\"\r\n     @close=\"resetFileds\"\r\n    >\r\n    <el-form :model=\"AddForm\" :rules=\"AddFormRules\" ref=\"AddFormRef\" label-width=\"100px\">\r\n      <el-form-item label=\"头像\"></el-form-item>\r\n    </el-form>\r\n    </el-dialog> -->\r\n\r\n    <!-- 修改管理员信息对话框 -->\r\n    <el-dialog\r\n     :title=\"isEdit ? '修改管理员' : '添加管理员'\"\r\n     :visible.sync=\"EditDialogVisible\"\r\n     width=\"30%\"\r\n     @close=\"resetFileds\"\r\n     >\r\n     <el-form :model=\"EditForm\" :rules=\"EditFormRules\" ref=\"EditFormRef\" label-width=\"100px\">\r\n        <el-form-item label=\"头像\">\r\n          <img v-if=\"!EditForm.avatar\" class=\"the_img\" src=\"../../assets/images/avatar.jpg\" alt=\"\" ref=\"imgSrc\" />\r\n          <img v-else :src=\"baseURL + EditForm.avatar.replace(/^public/, '')\" class=\"the_img\" alt=\"图片\" ref=\"imgSrc\">\r\n          <!-- <el-image\r\n   style=\"width: 20%\"\r\n   :src=\"baseURL + EditForm.avatar.replace(/^public/, '')\"\r\n   :preview-src-list=\"srcList\"\r\n  >\r\n</el-image> -->\r\n          <input @change=\"onFileChange\" type=\"file\" accept=\"image/*\" style=\"display:none\" ref=\"iptFile\">\r\n          <!-- <i class=\"el-icon-upload icon-upload\"></i> -->\r\n          <el-button @click=\"chooseImg\" type=\"warning\" round style=\"vertical-align: text-bottom;margin-left: 50%;\">更换头像</el-button>\r\n        </el-form-item>\r\n        <el-form-item label=\"账号\" prop=\"username\">\r\n          <el-input v-model=\"EditForm.username\" placeholder=\"请输入账号\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\" v-if=\"!isEdit\">\r\n          <el-input v-model=\"EditForm.password\" placeholder=\"请输入密码\" show-password></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"EditForm.email\" placeholder=\"请输入邮箱\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色\" prop=\"role\">\r\n          <el-select v-model=\"EditForm.role\" placeholder=\"请选择角色\" style=\"width: 100%;\">\r\n            <el-option v-for=\"obj in RoleList\"\r\n            :key=\"obj.role\"\r\n            :label=\"obj.name\"\r\n            :value=\"obj.role\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\">\r\n          <el-select v-model=\"EditForm.status\" placeholder=\"请选择状态\" style=\"width: 100%\">\r\n            <el-option v-for=\"obj in RoleState\"\r\n            :key=\"obj.state\"\r\n            :label=\"obj.name\"\r\n            :value=\"obj.state\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n    </el-form>\r\n     <span slot=\"footer\" class=\"dialog-footer\">\r\n       <el-button @click=\"EditDialogVisible = false\">取 消</el-button>\r\n       <el-button type=\"primary\" @click=\"upload()\">确 定</el-button>\r\n     </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { baseURL } from '@/utils/request'\r\nimport { getAdminAll, getByIdAdmin, upload, addAdmin, updatedInfo, delUserInfo } from '@/api'\r\nexport default {\r\n  name: 'UserList',\r\n  data () {\r\n    return {\r\n      adminList: [],\r\n      baseURL,\r\n      EditDialogVisible: false,\r\n      isEdit: false,\r\n      EditForm: {\r\n        avatar: '',\r\n        username: '',\r\n        email: '',\r\n        role: 'user',\r\n        status: 1,\r\n        _id: ''\r\n      },\r\n      // 修改管理员信息校验\r\n      EditFormRules: {\r\n        username: [\r\n          { required: true, message: '请输入账号', trigger: 'blur' },\r\n          { min: 2, max: 10, message: '账号长度在2~10个字符之间', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          { min: 6, max: 20, message: '密码长度在6~20个字符之间', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { pattern: /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/, message: '请输入正确的邮箱', trigger: 'blur' }\r\n        ],\r\n        role: [\r\n          { required: true, message: '角色不能为空', trigger: 'blur' },\r\n          { pattern: /^(admin|superadmin|user)$/, message: '角色不存在', trigger: 'blur' }\r\n        ],\r\n        status: [\r\n          { required: true, message: '状态不能为空', trigger: 'blur' },\r\n          { pattern: /^(0|1)$/, message: '状态不存在', trigger: 'blur' }\r\n        ],\r\n        avatar: [\r\n          { required: true, message: '图片不能为空', trigger: 'blur' }\r\n        ]\r\n      },\r\n      RoleList: [\r\n        { role: 'superadmin', name: '超级管理员' },\r\n        { role: 'admin', name: '管理员' },\r\n        { role: 'user', name: '用户' }\r\n      ],\r\n      RoleState: [\r\n        { state: 1, name: '激活' },\r\n        { state: 0, name: '未激活' }\r\n      ],\r\n      uploadFile: {},\r\n      AddDialogVisible: false\r\n    }\r\n  },\r\n  created () {\r\n    this.getAdmin()\r\n  },\r\n  methods: {\r\n    addAdminShowDialog () {\r\n      this.AddDialogVisible = true\r\n    },\r\n    // 获取管理员列表\r\n    async getAdmin () {\r\n      const { data: res } = await getAdminAll()\r\n      if (res.status !== 200) return this.$notify.error(res.message)\r\n      this.adminList = res.data\r\n    },\r\n    async showAddDialog () {\r\n      this.EditDialogVisible = true\r\n      this.isEdit = false\r\n    },\r\n    // 显示编辑对话框\r\n    async showEditDialog (id) {\r\n      this.isEdit = true\r\n      this.EditDialogVisible = true\r\n      const { data: res } = await getByIdAdmin(id)\r\n      if (res.status !== 200) return this.$notify.error(res.message)\r\n      this.EditForm = res.data\r\n      console.log(res.data)\r\n    },\r\n    // 更新头像点击事件\r\n    chooseImg () {\r\n      this.$refs.iptFile.click()\r\n    },\r\n    // 文件上传时间\r\n    onFileChange (e) {\r\n      const files = e.target.files\r\n      if (files.length === 0) {\r\n        // 证明没有选择文件\r\n      } else {\r\n        // 选择了文件\r\n        this.$refs.imgSrc.setAttribute('src', URL.createObjectURL(files[0]))\r\n        this.uploadFile = files[0]\r\n      }\r\n    },\r\n    // 更新修改数据\r\n    upload () {\r\n      this.$refs.EditFormRef.validate(async valid => {\r\n        if (!valid) return this.$notify.error('校验未通过')\r\n        if (!this.uploadFile.type) {\r\n          console.log('没有属性')\r\n        } else {\r\n          const fd = new FormData()\r\n          fd.append('file', this.uploadFile)\r\n          const { data: res } = await upload(fd)\r\n          if (res.status !== 201) return this.$notify.error('头像上传失败')\r\n          this.EditForm.avatar = res.data.path\r\n        }\r\n        if (this.isEdit) {\r\n          const { data: resd } = await updatedInfo(this.EditForm)\r\n          if (resd.status !== 201) return this.$notify.error('修改信息失败')\r\n          this.$notify.success('修改成功')\r\n          this.EditDialogVisible = false\r\n          this.getAdmin()\r\n          this.$store.dispatch('getUserInfoActions')\r\n        } else {\r\n          const { data: resd } = await addAdmin(this.EditForm)\r\n          if (resd.status !== 201) return this.$notify.error('创建管理员失败' + resd.message)\r\n          this.$notify.success('创建成功')\r\n          this.EditDialogVisible = false\r\n          this.getAdmin()\r\n        }\r\n      })\r\n    },\r\n    // 编辑对话框关闭时间\r\n    resetFileds () {\r\n      this.$refs.EditFormRef.resetFields()\r\n      this.EditForm = {\r\n        status: 1\r\n      }\r\n    },\r\n    // 删除对话框\r\n    async removeUserById (id) {\r\n      const confirmResult = await this.$confirm('此操作将导致管理员数据丢失, 是否继续？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonClass: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n      if (confirmResult === 'confirm') {\r\n        const { data: res } = await delUserInfo(id)\r\n        if (res.status !== 201) return this.$notify.error(res.message)\r\n        this.getAdmin()\r\n        this.$notify.success('删除成功')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .header-box {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n  .the_img {\r\n    width: 20%;\r\n  }\r\n  ::v-deep .icon-upload {\r\n    background: #c0c0c0;\r\n    position: absolute;\r\n    left: -1px;\r\n    width: 20%;\r\n    height: 86%;\r\n    line-height: 6;\r\n    text-align: center;\r\n    opacity: 0;\r\n    transition: opacity .5s;\r\n\r\n  }\r\n  ::v-deep .icon-upload:hover {\r\n    opacity: 1;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserList.vue?vue&type=template&id=83afdd10&scoped=true&\"\nimport script from \"./UserList.vue?vue&type=script&lang=js&\"\nexport * from \"./UserList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserList.vue?vue&type=style&index=0&id=83afdd10&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"83afdd10\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","on","showAddDialog","staticStyle","adminList","scopedSlots","_u","key","fn","scope","row","avatar","baseURL","replace","_e","_s","role","status","$formatDate","createTime","$event","showEditDialog","_id","removeUserById","isEdit","EditDialogVisible","resetFileds","ref","EditForm","EditFormRules","require","onFileChange","chooseImg","model","value","username","callback","$$v","$set","expression","password","email","_l","RoleList","obj","name","RoleState","state","upload","staticRenderFns","data","required","message","trigger","min","max","pattern","uploadFile","AddDialogVisible","created","methods","addAdminShowDialog","fd","confirmButtonText","cancelButtonClass","type","component"],"sourceRoot":""}